# 网站部署指南

本文档说明如何将摄影作品展示网站部署到阿里云 OSS，并配置 CDN 加速。

## 前置条件

1. 确保已安装 Node.js 和 npm
2. 确保已配置阿里云 OSS 的访问密钥（在 `.env` 文件中）
3. 确保已运行 `npm run sync-images` 生成数据文件

## 部署步骤

### 1. 安装依赖

```bash
npm install
```

### 2. 运行部署脚本

```bash
npm run deploy
```

部署脚本会：
- 创建 `dist` 目录
- 复制所有静态文件到 `dist` 目录
- 上传文件到阿里云 OSS

### 3. 配置阿里云 OSS

1. 登录阿里云 OSS 控制台
2. 找到你的 bucket（xingyan-photo）
3. 开启"静态网站托管"功能
   - 设置默认首页为 `index.html`
   - 设置默认 404 页面（可选）

### 4. 配置 CDN 加速（推荐）

1. 登录阿里云 CDN 控制台
2. 添加加速域名
3. 配置源站信息
   - 源站类型：OSS 域名
   - 源站地址：选择你的 OSS bucket
4. 配置缓存策略
   - 建议对图片设置较长的缓存时间
   - 对 HTML 和 JSON 文件设置较短的缓存时间

### 5. 绑定自定义域名（可选）

1. 在域名解析中添加 CNAME 记录
2. 在 OSS 或 CDN 中配置域名绑定
3. 申请 SSL 证书并配置 HTTPS

## 注意事项

1. 确保 `.env` 文件中的 OSS 配置正确
2. 部署前确保数据文件已更新
3. 建议定期运行 `npm run sync-images` 更新数据
4. 如果使用 CDN，注意缓存刷新策略

## 故障排除

如果遇到问题，请检查：

1. OSS 访问权限是否正确
2. 文件是否完整上传
3. 静态网站托管是否开启
4. CDN 配置是否正确

## 维护建议

1. 定期更新图片数据
2. 监控 CDN 流量和性能
3. 定期备份重要数据
4. 关注阿里云账单，优化存储和流量成本 